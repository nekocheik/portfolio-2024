<script setup lang="ts">
import { useRoute, useRouter } from 'vue-router'
import projetInformations from '@/helpers/projetInformation.js'

const route = useRoute()
const router = useRouter()

const isMode3 = computed(() => false)

const toggleMode = () => {
  if (isMode3.value) {
    router.replace({
      name: 'projets',
      params: {
        id: 'default'
      }
    })
  } else {
    router.replace({
      name: 'projets',
      params: {
        id: `${currentProjectIndex.value}`
      }
    })
  }
}

// Références pour les éléments à animer
const imgRef = ref(null)
const textRef = ref(null)
const containerRef = ref(null)

// Projets mock
const projects = ref(projetInformations)
const currentProjectIndex = ref(0)
const currentProject = computed(() => projects.value[currentProjectIndex.value])
const indicatorOnTransion = ref(false)
let interIndicator = null

const changeProject = (index: Number) => {
  indicatorOnTransion.value = true

  setTimeout(() => {
    currentProjectIndex.value = index
  }, 450)

  if (interIndicator) {
    clearInterval(interIndicator)
  }

  interIndicator = setTimeout(() => {
    indicatorOnTransion.value = false
  }, 600)
}

const openLink = (index: string) => {
  window.open(projects.value[index].link)
}


const viewSize = ref({ height: 0, width: 0 })
let invervalWatchClient: any

onMounted(() => {
  invervalWatchClient = setInterval(() => {
    viewSize.value.height = window.innerHeight
    viewSize.value.width = window.innerWidth
  }, 100)
})

onUnmounted(() => {
  clearInterval(invervalWatchClient)
})

</script>

<template>
  <div class="h-[100vh] w-[100vw] bg-white relative">
    <div class="absolute left-[50%] translate-x-[-50%] top-0">
      <svg :width="viewSize.width" :height="viewSize.height" viewBox="0 0 1152 580" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path fill-rule="evenodd" clip-rule="evenodd"
          d="M1152 0H0V580H1152V0ZM57.6917 297.767L100.074 337V271.966H88.3823V310.233L46 271V335.551H57.6917V297.767ZM150.534 335.551H193.961V324.728H162.33V309.17H186.131V298.25H162.33V282.886H193.961V271.966H150.534V335.551ZM299.301 335.551H285.417L269.654 313.518L253.891 335.551H240.007L262.66 303.662L240.112 271.966H254.1L269.654 293.902L285.312 271.966H299.301L276.648 303.662L299.301 335.551ZM394.919 282.886V271.966H341.993V282.886H362.558V335.551H374.249V282.886H394.919ZM516.457 335.551H504.661V271.966H530.237C533.299 271.966 536.222 272.449 539.005 273.416C541.859 274.318 544.399 275.638 546.626 277.378C548.922 279.246 550.697 281.404 551.95 283.852C553.202 286.236 553.829 288.748 553.829 291.389C553.829 294.095 553.202 296.64 551.95 299.023C550.697 301.407 548.922 303.565 546.626 305.498C544.399 307.237 541.859 308.59 539.005 309.556C536.222 310.458 533.299 310.909 530.237 310.909H516.353L516.457 335.551ZM516.353 282.886V299.99H530.237C533.786 299.99 536.674 299.056 538.901 297.187C540.989 295.641 542.033 293.709 542.033 291.389C542.033 289.135 540.989 287.202 538.901 285.592C536.604 283.788 533.716 282.886 530.237 282.886H516.353ZM612.329 307.527L635.399 335.551H649.909L629.031 309.846C629.797 309.846 630.98 309.685 632.58 309.363C634.251 309.041 635.712 308.654 636.965 308.204C640.444 306.979 643.367 304.982 645.733 302.212C648.448 298.927 649.805 295.319 649.805 291.389C649.805 288.813 649.213 286.365 648.03 284.045C646.847 281.662 645.142 279.568 642.915 277.764C640.688 275.896 638.078 274.479 635.086 273.512C632.163 272.482 629.031 271.966 625.691 271.966H600.533L600.637 335.551H612.329V307.527ZM612.329 299.99V282.886H625.691C629.657 282.886 632.789 283.852 635.086 285.785C637.034 287.395 638.009 289.264 638.009 291.389C638.009 292.936 637.452 294.353 636.338 295.641C635.225 296.93 633.903 297.864 632.372 298.444C629.936 299.474 626.665 299.99 622.559 299.99H612.329ZM744.327 331.782C739.037 334.681 733.261 336.13 726.998 336.13C720.734 336.13 714.923 334.681 709.565 331.782C704.276 328.883 700.065 324.953 696.933 319.993C693.802 315.032 692.236 309.621 692.236 303.758C692.236 297.896 693.802 292.485 696.933 287.524C700.065 282.564 704.276 278.634 709.565 275.735C714.923 272.836 720.734 271.387 726.998 271.387C733.261 271.387 739.037 272.836 744.327 275.735C749.685 278.634 753.93 282.564 757.062 287.524C760.194 292.485 761.76 297.896 761.76 303.758C761.76 309.621 760.194 315.032 757.062 319.993C753.93 324.953 749.685 328.883 744.327 331.782ZM738.481 285.108C735.001 283.176 731.173 282.209 726.998 282.209C722.822 282.209 718.96 283.176 715.411 285.108C711.931 287.041 709.147 289.682 707.059 293.032C705.041 296.318 704.032 299.893 704.032 303.758C704.032 307.624 705.041 311.231 707.059 314.581C709.147 317.867 711.931 320.476 715.411 322.408C718.96 324.341 722.822 325.307 726.998 325.307C731.173 325.307 735.001 324.341 738.481 322.408C742.03 320.476 744.814 317.867 746.832 314.581C748.92 311.296 749.964 307.688 749.964 303.758C749.964 299.829 748.92 296.221 746.832 292.936C744.814 289.65 742.03 287.041 738.481 285.108ZM824.588 336.13C828.485 336.13 832.104 335.422 835.444 334.004C838.854 332.523 841.743 330.429 844.109 327.723C849.189 322.119 851.729 314.646 851.729 305.305V271.966H840.038V305.305C840.038 311.425 838.646 316.288 835.862 319.896C833.078 323.504 829.32 325.307 824.588 325.307C821.943 325.307 819.507 324.599 817.28 323.182C815.053 321.764 813.279 319.767 811.957 317.19L801.413 322.022C803.849 326.403 807.085 329.849 811.121 332.362C815.227 334.874 819.716 336.13 824.588 336.13ZM944.113 335.551H900.686V271.966H944.113V282.886H912.482V298.25H936.283V309.17H912.482V324.728H944.113V335.551ZM1044 282.886V271.966H991.074V282.886H1011.64V335.551H1023.33V282.886H1044Z"
          fill="black" />
      </svg>

      

    </div>
  </div>
</template>
